{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"prepare-release-action","text":"<p>Automates preparation of a release pull request and changelog generation prior to final tagging &amp; publishing.</p>","boost":2},{"location":"#purpose","title":"Purpose","text":"<p>This GitHub Action:</p> <ul> <li>Ensures (or creates) an open release PR (pattern: <code>release/&lt;version&gt;</code>).</li> <li>Synchronizes the release branch from a source branch (default: <code>development</code>).</li> <li>Collects merged PRs since last tag into a structured changelog section.</li> <li>Optionally generates an AI summary (if <code>openai-api-key</code> provided).</li> <li>Commits changelog changes and sets action outputs (<code>version</code>, <code>branch</code>, <code>pr-number</code>).</li> </ul>","boost":2},{"location":"#high-level-flow","title":"High-Level Flow","text":"<ol> <li>Build context from inputs.</li> <li><code>GitHubService</code> finds or creates release PR.</li> <li>Branch sync (fetch &amp; merge from source branch).</li> <li>List merged PRs since last tag.</li> <li><code>ChangelogService</code> builds &amp; inserts section.</li> <li>Optional AI summarization.</li> <li>Commit/push CHANGELOG diff.</li> <li>Outputs exposed by <code>index.ts</code>.</li> </ol>","boost":2},{"location":"#quick-links","title":"Quick Links","text":"<ul> <li>Usage: Action YAML, inputs &amp; outputs.</li> <li>Architecture: Components, sequence, versioning, extensibility.</li> <li>Development: Build, test, lint, roadmap.</li> <li>ADRs: Decision history.</li> </ul> <p>Navigate using the sidebar tabs.</p>","boost":2},{"location":"adr-index/","title":"ADR Index","text":"ID Title Status 0000 Template \u2014 0001 Release Branch &amp; Patch Bump Strategy Accepted <p>Refer to files in <code>docs/adrs/</code> for full records.</p>"},{"location":"architecture/","title":"Architecture","text":""},{"location":"architecture/#components","title":"Components","text":"Component Role <code>ApplicationService</code> Orchestrates end-to-end flow. <code>GithubService</code> GitHub GraphQL/REST operations: PR discovery/creation, label management, PR listing, tag inspection. <code>ChangelogService</code> Builds structured changelog section and commits changes. <code>AISummarizer</code> Optional AI summary generation. <code>types.ts</code> Shared type contracts. <code>index.ts</code> Entrypoint; sets outputs &amp; error handling."},{"location":"architecture/#workflow-diagrams","title":"Workflow Diagrams","text":""},{"location":"architecture/#development-release-workflow","title":"Development &amp; Release Workflow","text":""},{"location":"architecture/#action-internal-sequence-detailed","title":"Action Internal Sequence (Detailed)","text":""},{"location":"architecture/#version-strategy","title":"Version Strategy","text":"<p>Let latest tag = <code>vA.B.C</code>. Next version = <code>A.B.(C+1)</code>. Major/minor changes require external tooling or manual override (future ADR).</p>"},{"location":"architecture/#changelog-section-structure","title":"Changelog Section Structure","text":"<pre><code>## [version] - YYYY-MM-DD\n\n### AI Summary (optional)\n&lt;summary bullets&gt;\n\n### Added\n\n- item (#PR)\n\n### Changed\n\n... details ...\n\n### Fixed\n\n... details ...\n\n### Breaking changes\n\n... details ...\n</code></pre> <p>Replacement uses a regex anchored to existing <code>## [&lt;version&gt;]</code> block.</p>"},{"location":"architecture/#error-handling","title":"Error Handling","text":"<ul> <li>Merge conflicts logged with a warning.</li> <li>AI failures do not abort.</li> <li>Missing repository/refs produce thrown errors (fail fast).</li> </ul>"},{"location":"architecture/#extensibility-points","title":"Extensibility Points","text":"Area Potential Extension Version policy Support conventional commit-based semver bump. Changelog parsing Parse PR body standardized template. AI model Configurable model &amp; prompt customization. Label taxonomy Multi-label classification for changelog categories."},{"location":"architecture/#non-goals","title":"Non-Goals","text":"<ul> <li>Publishing releases (delegated to semantic-release).</li> <li>Semantic diffing of code changes.</li> <li>Multi-repo release orchestration.</li> </ul>"},{"location":"architecture/#risks","title":"Risks","text":"Risk Impact Mitigation Regex replacement edge cases Corrupt changelog Unit tests around insertion logic (to add). API rate limits Partial data Pagination implemented; could add backoff. Inconsistent PR body formatting Category misclassification Fallback generic category heuristic. <p>See ADRs for decisions influencing this design.</p>"},{"location":"development/","title":"Development","text":""},{"location":"development/#prerequisites","title":"Prerequisites","text":"<ul> <li>Node 24.x</li> <li>Docker (optional for Make targets)</li> <li>GitHub token for integration testing (not required for unit tests)</li> </ul>"},{"location":"development/#install","title":"Install","text":"<pre><code>npm install\n</code></pre> <p>Or via Docker:</p> <pre><code>make build-base\nmake run-npm CMD=test\n</code></pre>"},{"location":"development/#build","title":"Build","text":"<pre><code>npm run build\n</code></pre> <p>Uses <code>@vercel/ncc</code> to bundle <code>src/index.ts</code> to a single artifact.</p>"},{"location":"development/#test","title":"Test","text":"<pre><code>npm test\n</code></pre> <p>Coverage thresholds enforced per diff (see <code>AGENTS.md</code>). Current suite exercises:</p> <ul> <li>Entrypoint success &amp; failure path (<code>tests/index.test.ts</code>).</li> <li>Basic instantiation &amp; run path for <code>ApplicationService</code>.</li> </ul> <p>Add tests for:</p> <ul> <li>Changelog insertion/replacement edge cases.</li> <li>Branch merge error logging.</li> <li>AI summary skip conditions.</li> </ul>"},{"location":"development/#lint","title":"Lint","text":"<pre><code>npm run lint\n</code></pre> <p>Auto-fix:</p> <pre><code>npm run fix\n</code></pre> <p>Makefile shortcuts:</p> Target Purpose <code>make start</code> Build stack + lint (auto-fix fallback). <code>make test</code> Run tests inside container. <code>make lint</code> Lint inside container. <code>make dev</code> Mounted development container. <code>make start-app</code> Run built runtime image."},{"location":"development/#action-iteration","title":"Action Iteration","text":"<p>After changes:</p> <ol> <li><code>npm run build</code></li> <li>Commit compiled artifacts (CI/build stage will re-bundle).</li> <li>Push branch (<code>feat/&lt;ticket&gt;-slug</code> etc).</li> <li>Open PR with changelog section (per <code>AGENTS.md</code>).</li> </ol>"},{"location":"development/#adding-inputs","title":"Adding Inputs","text":"<ol> <li>Extend <code>buildContext()</code> in <code>ApplicationService</code>.</li> <li>Document new input in <code>usage.md</code>.</li> <li>Add test validating default + explicit override.</li> <li>Consider ADR if input changes architectural scope.</li> </ol>"},{"location":"development/#adding-services","title":"Adding Services","text":"<p>Place in <code>src/services/</code>. Export types in <code>types.ts</code> if reused.</p>"},{"location":"development/#releasing","title":"Releasing","text":"<p>Semantic-release on <code>main</code> tags &amp; updates <code>CHANGELOG.md</code>. Avoid manual edits\u2014this action writes sections pre-release; semantic-release later appends official notes.</p>"},{"location":"development/#debugging","title":"Debugging","text":"<p>Set <code>ACTIONS_STEP_DEBUG=true</code> in workflow to see extra logs.</p>"},{"location":"development/#roadmap-indicative","title":"Roadmap (Indicative)","text":"Item Rationale Conventional commit semantic bump Align release versioning with commit intent. Better PR template parsing Improve category accuracy. Pluggable AI provider abstraction Reduce vendor lock-in. Caching GitHub queries Lower rate limit consumption. <p>Contribute via PR following <code>AGENTS.md</code> checklist.</p>"},{"location":"usage/","title":"Macro Rendering Error","text":"<p>File: <code>usage.md</code></p> <p>UndefinedError: 'secrets' is undefined</p> <pre><code>Traceback (most recent call last):\n  File \"/usr/local/lib/python3.13/site-packages/mkdocs_macros/plugin.py\", line 688, in render\n    return md_template.render(**page_variables)\n           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/jinja2/environment.py\", line 1295, in render\n    self.environment.handle_exception()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/usr/local/lib/python3.13/site-packages/jinja2/environment.py\", line 942, in handle_exception\n    raise rewrite_traceback_stack(source=source)\n  File \"&lt;template&gt;\", line 13, in top-level template code\n  File \"/usr/local/lib/python3.13/site-packages/jinja2/environment.py\", line 490, in getattr\n    return getattr(obj, attribute)\njinja2.exceptions.UndefinedError: 'secrets' is undefined\n</code></pre>"}]}